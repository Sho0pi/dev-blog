name: hugo publish

on:
push:
branches:
- master

jobs:
build-deploy:
runs-on: ubuntu-20.04
steps:
- uses: actions/checkout@v1
with:
submodules: true


- name: Setup Hugo
uses: peaceiris/actions-hugo@v3
with:
hugo-version: 'latest'

- name: Build
run: hugo --minify

- name: Deploy
uses: peaceiris/actions-gh-pages@v4
env:
ACTIONS_DEPLOY_KEY: ${{ secrets.GITHUB_TOKEN }}
EXTERNAL_REPOSITORY: sho0pi/sho0pi.github.io
PUBLISH_BRANCH: master
destination_dir: dev
PUBLISH_DIR: ./public
with:
emptyCommits: false
commitMessage: ${{ github.event.head_commit.message }}
